flowchart TB
    subgraph PresentationLayer["ðŸ–¥ï¸ Presentation Layer"]
        direction LR
        UI[React 18 + TypeScript]
        State[Zustand State]
        Query[TanStack Query]
        Graph[Force Graph Viz]
    end

    subgraph APILayer["âš¡ API Layer"]
        direction LR
        FastAPI[FastAPI + Uvicorn]
        Auth[Auth Router]
        GraphAPI[Graph Router]
        RAGAPI[RAG Router]
        StatsAPI[Stats Router]
    end

    subgraph ServiceLayer["ðŸ”§ Service Layer"]
        direction LR
        RAGAgent[RAG Agent]
        Embedder[Embedding Service]
        Reranker[Reranker Service]
        Gemini[Gemini LLM]
    end

    subgraph DataLayer["ðŸ’¾ Data Layer"]
        direction LR
        Neo4j[(Neo4j AuraDB)]
        VectorIdx[Vector Index]
        GraphStore[Graph Store]
    end

    subgraph ProcessingLayer["ðŸ”„ Processing Pipeline"]
        direction LR
        Crawler[Document Crawler]
        Parser[Structure Parser]
        NER[NER Model]
        RE[RE Model]
    end

    UI --> FastAPI
    State --> UI
    Query --> FastAPI
    Graph --> UI

    FastAPI --> Auth
    FastAPI --> GraphAPI
    FastAPI --> RAGAPI
    FastAPI --> StatsAPI

    RAGAPI --> RAGAgent
    RAGAgent --> Embedder
    RAGAgent --> Reranker
    RAGAgent --> Gemini

    Embedder --> Neo4j
    GraphAPI --> Neo4j
    Neo4j --> VectorIdx
    Neo4j --> GraphStore

    ProcessingLayer --> Neo4j

    classDef presentation fill:#3b82f6,stroke:#1d4ed8,color:#fff
    classDef api fill:#10b981,stroke:#059669,color:#fff
    classDef service fill:#f59e0b,stroke:#d97706,color:#fff
    classDef data fill:#8b5cf6,stroke:#7c3aed,color:#fff
    classDef processing fill:#ec4899,stroke:#db2777,color:#fff

    class UI,State,Query,Graph presentation
    class FastAPI,Auth,GraphAPI,RAGAPI,StatsAPI api
    class RAGAgent,Embedder,Reranker,Gemini service
    class Neo4j,VectorIdx,GraphStore data
    class Crawler,Parser,NER,RE processing
